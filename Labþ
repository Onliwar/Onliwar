import sqlite3

conn = sqlite3.connect('blog.db')
c = conn.cursor()

c.execute('''CREATE TABLE IF NOT EXISTS posts
             (id INTEGER PRIMARY KEY, title TEXT, content TEXT, user_id INTEGER)''')

c.execute('''CREATE TABLE IF NOT EXISTS comments
             (id INTEGER PRIMARY KEY, content TEXT, post_id INTEGER, user_id INTEGER)''')

c.execute('''CREATE TABLE IF NOT EXISTS users
             (id INTEGER PRIMARY KEY, username TEXT, email TEXT)''')

# Додано таблицю для профілів
c.execute('''CREATE TABLE IF NOT EXISTS profiles
             (id INTEGER PRIMARY KEY, user_id INTEGER, bio TEXT, picture TEXT)''')

def add_post(title, content, user_id):
    c.execute("INSERT INTO posts (title, content, user_id) VALUES (?, ?, ?)", (title, content, user_id))
    conn.commit()

def add_comment(content, post_id, user_id):
    c.execute("INSERT INTO comments (content, post_id, user_id) VALUES (?, ?, ?)", (content, post_id, user_id))
    conn.commit()

def add_user(username, email, bio=None, picture=None):
    # Змінено запит для включення інформації про профіль
    c.execute("INSERT INTO users (username, email) VALUES (?, ?)", (username, email))
    user_id = c.lastrowid
    if bio or picture:
        c.execute("INSERT INTO profiles (user_id, bio, picture) VALUES (?, ?, ?)", (user_id, bio, picture))
    conn.commit()

add_user("John", "john@example.com", "Hello, I'm John!", "john.jpg")
add_post("Hello World", "This is my first post", 1)
add_comment("Great post!", 1, 1)

conn.close()
